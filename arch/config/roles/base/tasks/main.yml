- name: Update pacman cache and upgrade
  become: true
  community.general.pacman:
    update_cache: true
    upgrade: true

- name: Install base packages
  ansible.builtin.include_role:
    name: packages
  vars:
    packages: "{{ base.packages }}"

- name: Enable base system services
  ansible.builtin.include_role:
    name: services
  vars:
    services: "{{ base.services }}"

- ansible.builtin.import_tasks: dual_boot.yml
  when:
    - base.dual_boot is defined

- ansible.builtin.import_tasks: ssh.yml
  when:
    - base.ssh is defined
